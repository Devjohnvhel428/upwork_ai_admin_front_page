import{r as n,_ as w,R as c,b as g,c as E,P as r,j as e,B as S}from"./index-6iEERR-e.js";import{C as me,F as re,f as ue,a as fe}from"./index-Dw9DNKnZ.js";import{c as he,u as pe}from"./data.service-BBkj99C9.js";import{h as ve}from"./moment-C5S46NFB.js";import{C as be,a as xe}from"./CRow-fKxGh7hR.js";import{C as ye,a as Ce}from"./CCardBody-DOLfT8pE.js";import{C as ge}from"./CCardHeader-CEW7VdCK.js";import{C as Ne}from"./CFormInput-BqE_U1fq.js";import{C as je,a as we,b as te,c as k,d as Ee,e as R}from"./CTable-DPRmqZw7.js";import{a as F}from"./index.esm-Dq2-a4Nk.js";import{C as ke}from"./CFormSelect-BqRddZbU.js";import{u as Re,T as Te,a as ne,b as Me,e as Oe}from"./DefaultLayout-BBuuwaJd.js";import"./auth.service-BFn0QetG.js";var I=n.forwardRef(function(s,o){var l=s.children,i=s.className,a=w(s,["children","className"]);return c.createElement("div",g({className:E("modal-content",i)},a,{ref:o}),l)});I.propTypes={children:r.node,className:r.string};I.displayName="CModalContent";var Y=n.forwardRef(function(s,o){var l,i=s.children,a=s.alignment,d=s.className,h=s.fullscreen,f=s.scrollable,v=s.size,N=w(s,["children","alignment","className","fullscreen","scrollable","size"]);return c.createElement("div",g({className:E("modal-dialog",(l={"modal-dialog-centered":a==="center"},l[typeof h=="boolean"?"modal-fullscreen":"modal-fullscreen-".concat(h,"-down")]=h,l["modal-dialog-scrollable"]=f,l["modal-".concat(v)]=v,l),d)},N,{ref:o}),i)});Y.propTypes={alignment:r.oneOf(["top","center"]),children:r.node,className:r.string,fullscreen:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl"])]),scrollable:r.bool,size:r.oneOf(["sm","lg","xl"])};Y.displayName="CModalDialog";var oe=n.createContext({}),q=n.forwardRef(function(s,o){var l=s.children,i=s.alignment,a=s.backdrop,d=a===void 0?!0:a,h=s.className,f=s.container,v=s.duration,N=v===void 0?150:v,b=s.focus,B=b===void 0?!0:b,T=s.fullscreen,D=s.keyboard,j=D===void 0?!0:D,M=s.onClose,L=s.onClosePrevented,z=s.onShow,O=s.portal,H=O===void 0?!0:O,t=s.scrollable,x=s.size,u=s.transition,p=u===void 0?!0:u,y=s.unmountOnClose,le=y===void 0?!0:y,V=s.visible,ae=w(s,["children","alignment","backdrop","className","container","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),Q=n.useRef(null),P=n.useRef(null),ie=n.useRef(null),ce=Re(o,P),U=n.useState(V),C=U[0],A=U[1],X=n.useState(!1),Z=X[0],$=X[1],de={visible:C,setVisible:A};n.useEffect(function(){A(V)},[V]),n.useEffect(function(){var m;return C?(Q.current=document.activeElement,document.addEventListener("mouseup",ee),document.addEventListener("keydown",se)):(m=Q.current)===null||m===void 0||m.focus(),function(){document.removeEventListener("mouseup",ee),document.removeEventListener("keydown",se)}},[C]);var _=function(){return d==="static"?$(!0):(A(!1),M&&M())};n.useLayoutEffect(function(){L&&L(),setTimeout(function(){return $(!1)},N)},[Z]),n.useLayoutEffect(function(){return C?(document.body.classList.add("modal-open"),d&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout(function(){var m;B&&((m=P.current)===null||m===void 0||m.focus())},p?N:0)):(document.body.classList.remove("modal-open"),d&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),d&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}},[C]);var ee=function(m){P.current&&P.current==m.target&&_()},se=function(m){m.key==="Escape"&&j&&_()};return c.createElement(c.Fragment,null,c.createElement(Te,{in:C,mountOnEnter:!0,nodeRef:P,onEnter:z,onExit:M,unmountOnExit:le,timeout:p?N:0},function(m){return c.createElement(ne,{container:f,portal:H},c.createElement(oe.Provider,{value:de},c.createElement("div",g({className:E("modal",{"modal-static":Z,fade:p,show:m==="entered"},h),tabIndex:-1},C?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:g({},m!=="exited"&&{display:"block"})},ae,{ref:ce}),c.createElement(Y,{alignment:i,fullscreen:T,scrollable:t,size:x},c.createElement(I,{ref:ie},l)))))}),d&&c.createElement(ne,{container:f,portal:H},c.createElement(Me,{visible:C})))});q.propTypes={alignment:r.oneOf(["top","center"]),backdrop:r.oneOfType([r.bool,r.oneOf(["static"])]),children:r.node,className:r.string,container:r.any,duration:r.number,focus:r.bool,fullscreen:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl"])]),keyboard:r.bool,onClose:r.func,onClosePrevented:r.func,onShow:r.func,portal:r.bool,scrollable:r.bool,size:r.oneOf(["sm","lg","xl"]),transition:r.bool,unmountOnClose:r.bool,visible:r.bool};q.displayName="CModal";var K=n.forwardRef(function(s,o){var l=s.children,i=s.className,a=w(s,["children","className"]);return c.createElement("div",g({className:E("modal-body",i)},a,{ref:o}),l)});K.propTypes={children:r.node,className:r.string};K.displayName="CModalBody";var W=n.forwardRef(function(s,o){var l=s.children,i=s.className,a=w(s,["children","className"]);return c.createElement("div",g({className:E("modal-footer",i)},a,{ref:o}),l)});W.propTypes={children:r.node,className:r.string};W.displayName="CModalFooter";var G=n.forwardRef(function(s,o){var l=s.children,i=s.className,a=s.closeButton,d=a===void 0?!0:a,h=w(s,["children","className","closeButton"]),f=n.useContext(oe).setVisible;return c.createElement("div",g({className:E("modal-header",i)},h,{ref:o}),l,d&&c.createElement(Oe,{onClick:function(){return f(!1)}}))});G.propTypes={children:r.node,className:r.string,closeButton:r.bool};G.displayName="CModalHeader";var J=n.forwardRef(function(s,o){var l=s.children,i=s.as,a=i===void 0?"h5":i,d=s.className,h=w(s,["children","as","className"]);return c.createElement(a,g({className:E("modal-title",d)},h,{ref:o}),l)});J.propTypes={as:r.elementType,children:r.node,className:r.string};J.displayName="CModalTitle";const Pe=({opened:s,data:o,handleClose:l})=>{const[i,a]=n.useState(!1);return n.useEffect(()=>{a(s)},[s]),e.jsx(e.Fragment,{children:e.jsxs(q,{alignment:"center",visible:i,onClose:()=>{a(!1),l()},children:[e.jsx(G,{children:e.jsx(J,{children:o==null?void 0:o.writer})}),e.jsx(K,{children:o==null?void 0:o.comment}),e.jsx(W,{children:e.jsx(F,{color:"secondary",onClick:()=>{a(!1),l()},children:"Close"})})]})})},We=()=>{const[s,o]=n.useState([]),[l,i]=n.useState(null),[a,d]=n.useState(!1),[h,f]=n.useState(!1),[v,N]=n.useState(""),[b,B]=n.useState(1),[T,D]=n.useState(10),[j,M]=n.useState(1),L=async t=>{let x=new Array;t.forEach(u=>{x.push(u)}),o(x)},z=async()=>{f(!0);try{const t=await he(b,T,v);t.msg==="no-section"?(S.warning("There is no information!"),f(!1)):(await L(t.reviews),M(t.pages),f(!1))}catch(t){S.error(t)}};n.useEffect(()=>{z()},[b,T,v]);const O=async(t,x)=>{try{let u=new FormData;Object.keys(t).forEach(y=>{u.append(y,t[y])}),u.set("visible",x),f(!0);const p=await pe(u);p.msg==="no-section"?(S.warning("There is no information!"),f(!1)):p.msg==="update"&&(S.success("The Review information was updated!"),z())}catch(u){S.error(u.response.data)}},H=()=>{d(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"All Reviews"}),e.jsx(be,{children:e.jsx(xe,{xs:!0,children:e.jsxs(ye,{className:"mb-4",children:[e.jsx(ge,{children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(Ne,{type:"text",placeholder:"Filter by All",onKeyDown:t=>{t.key==="Enter"&&N(t.target.value)},className:"form-control",style:{width:"10rem",left:"0"}})})}),e.jsx(Ce,{children:e.jsxs(je,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(we,{className:"text-nowrap",children:e.jsxs(te,{children:[e.jsx(k,{className:"bg-body-tertiary",children:"Tool"}),e.jsx(k,{className:"bg-body-tertiary",children:"Website"}),e.jsx(k,{className:"bg-body-tertiary text-center",children:"Rating"}),e.jsx(k,{className:"bg-body-tertiary",children:"Writer"}),e.jsx(k,{className:"bg-body-tertiary text-left",children:"Created At"}),e.jsx(k,{className:"bg-body-tertiary text-center",children:"Show/Hide"})]})}),e.jsx(Ee,{children:s.map((t,x)=>{var u,p,y;return e.jsxs(te,{"v-for":"item in tableItems",onClick:()=>{d(!0),i(t)},children:[e.jsx(R,{children:e.jsx("div",{children:(u=t==null?void 0:t.request)==null?void 0:u.name})}),e.jsx(R,{className:"text-center",children:e.jsx("div",{className:"d-flex justify-content-between text-nowrap",children:e.jsx("div",{className:"fw-semibold",children:e.jsx("a",{className:"text-info form-link",target:"_blank",href:(p=t.request)==null?void 0:p.link,children:(y=t.request)==null?void 0:y.link})})})}),e.jsx(R,{className:"text-center",children:e.jsx("div",{children:t==null?void 0:t.rating})}),e.jsx(R,{children:e.jsx("div",{children:t==null?void 0:t.writer})}),e.jsx(R,{children:ve(t.created).format("MMM D, YYYY")}),e.jsx(R,{className:"text-center",children:t.visible?e.jsx(F,{color:"dark",className:"text-light",shape:"rounded-pill",onClick:()=>{O(t,!1)},children:"Hide"}):e.jsx(F,{color:"success",className:"text-light",shape:"rounded-pill",onClick:()=>{O(t,!0)},children:"Show"})})]},x)})})]})}),e.jsx(me,{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsxs(ke,{value:T,onChange:t=>D(Number(t.target.value)),className:"form-select position-absolute mx-1",style:{width:"5rem",left:"0"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]}),e.jsx(F,{onClick:()=>B(t=>Math.max(t-1,1)),disabled:b===1||j===0,className:"btn btn-secondary mx-2",children:e.jsx(re,{icon:ue})}),e.jsxs("span",{children:["Page ",b," of ",j]}),e.jsx(F,{onClick:()=>B(t=>Math.min(t+1,j)),disabled:b===j||j===0,className:"btn btn-secondary mx-2",children:e.jsx(re,{icon:fe})})]})})]})})}),e.jsx(Pe,{opened:a,data:l,handleClose:H})]})};export{We as default};
