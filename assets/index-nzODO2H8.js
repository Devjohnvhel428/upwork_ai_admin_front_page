import{r,j as e,B as x}from"./index-BaWRwsMh.js";import{C as F,F as C,f as R,a as S}from"./index-BwbcUSsd.js";import{c as P,u as D}from"./data.service-B02iqPWJ.js";import{h as E}from"./moment-C5S46NFB.js";import{C as H,a as A}from"./CRow-D70XT_4p.js";import{C as B,a as M}from"./CCardBody-CP5Rtk1v.js";import{C as Y}from"./CCardHeader-CvmEzmmw.js";import{C as q}from"./CFormInput-CUUHe04C.js";import{C as I,a as O,b as g,c as l,d as W,e as n}from"./CTable-CDWG3Jow.js";import{a as m}from"./index.esm-PgHpzTcZ.js";import{C as K}from"./CFormSelect-CsHdx2Jx.js";import"./auth.service-BVVLbTsi.js";const ae=()=>{const[w,y]=r.useState([]),[L,o]=r.useState(!1),[j,v]=r.useState(""),[i,u]=r.useState(1),[f,N]=r.useState(10),[c,T]=r.useState(1),k=async s=>{let t=new Array;s.forEach(a=>{t.push(a)}),y(t)},p=async()=>{o(!0);try{const s=await P(i,f,j);s.msg==="no-section"?(x.warning("There is no information!"),o(!1)):(await k(s.reviews),T(s.pages),o(!1))}catch(s){x.error(s)}};r.useEffect(()=>{p()},[i,f,j]);const b=async(s,t)=>{try{let a=new FormData;Object.keys(s).forEach(h=>{a.append(h,s[h])}),a.set("visible",t),o(!0);const d=await D(a);d.msg==="no-section"?(x.warning("There is no information!"),o(!1)):d.msg==="update"&&(x.success("The Review information was updated!"),p())}catch(a){x.error(a.response.data)}};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"All Reviews"}),e.jsx(H,{children:e.jsx(A,{xs:!0,children:e.jsxs(B,{className:"mb-4",children:[e.jsx(Y,{children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(q,{type:"text",placeholder:"Filter by All",onKeyDown:s=>{s.key==="Enter"&&v(s.target.value)},className:"form-control",style:{width:"10rem",left:"0"}})})}),e.jsx(M,{children:e.jsxs(I,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(O,{className:"text-nowrap",children:e.jsxs(g,{children:[e.jsx(l,{className:"bg-body-tertiary",children:"Tool"}),e.jsx(l,{className:"bg-body-tertiary",children:"Website"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Rating"}),e.jsx(l,{className:"bg-body-tertiary",children:"Writer"}),e.jsx(l,{className:"bg-body-tertiary text-left",children:"Created At"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Show/Hide"})]})}),e.jsx(W,{children:w.map((s,t)=>{var a,d,h;return e.jsxs(g,{"v-for":"item in tableItems",children:[e.jsx(n,{children:e.jsx("div",{children:(a=s==null?void 0:s.request)==null?void 0:a.name})}),e.jsx(n,{className:"text-center",children:e.jsx("div",{className:"d-flex justify-content-between text-nowrap",children:e.jsx("div",{className:"fw-semibold",children:e.jsx("a",{className:"text-info form-link",target:"_blank",href:(d=s.request)==null?void 0:d.link,children:(h=s.request)==null?void 0:h.link})})})}),e.jsx(n,{className:"text-center",children:e.jsx("div",{children:s==null?void 0:s.rating})}),e.jsx(n,{children:e.jsx("div",{children:s==null?void 0:s.writer})}),e.jsx(n,{children:E(s.created).format("MMM D, YYYY")}),e.jsx(n,{className:"text-center",children:s.visible?e.jsx(m,{color:"dark",className:"text-light",shape:"rounded-pill",onClick:()=>{b(s,!1)},children:"Hide"}):e.jsx(m,{color:"success",className:"text-light",shape:"rounded-pill",onClick:()=>{b(s,!0)},children:"Show"})})]},t)})})]})}),e.jsx(F,{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsxs(K,{value:f,onChange:s=>N(Number(s.target.value)),className:"form-select position-absolute mx-1",style:{width:"5rem",left:"0"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]}),e.jsx(m,{onClick:()=>u(s=>Math.max(s-1,1)),disabled:i===1||c===0,className:"btn btn-secondary mx-2",children:e.jsx(C,{icon:R})}),e.jsxs("span",{children:["Page ",i," of ",c]}),e.jsx(m,{onClick:()=>u(s=>Math.min(s+1,c)),disabled:i===c||c===0,className:"btn btn-secondary mx-2",children:e.jsx(C,{icon:S})})]})})]})})})]})};export{ae as default};
