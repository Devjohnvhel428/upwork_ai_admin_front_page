import{r as u,_ as V,R,b as P,c as H,P as q,j as e,B as x,q as U,k as W}from"./index-kWjOk_rB.js";import{h as T}from"./moment-C5S46NFB.js";import{a as z,b as p,C as F,c as f}from"./CFormInput-D9c2VT5R.js";import{e as O,f as G,s as K}from"./data.service-mvPMHDmb.js";import{C as J,a as Z}from"./CRow-BcXxV3hI.js";import{C as Q,a as X}from"./CCardBody-ewbRTfvk.js";import{C as _}from"./CCardHeader-bcYSGlVu.js";import{C as ee}from"./CForm-dkM6XW0p.js";import{C as h}from"./CInputGroup-PeGLLWkP.js";import{C as E}from"./CFormSelect-HQ2OGjDV.js";import{a as M}from"./index.esm-CBmJo1CE.js";import"./auth.service-DBOSOWc0.js";var B=u.forwardRef(function(r,g){var a=r.children,n=r.className,C=r.feedback,c=r.feedbackInvalid,m=r.feedbackValid,N=r.floatingClassName,b=r.floatingLabel,j=r.id,l=r.invalid,o=r.label,d=r.plainText,v=r.text,y=r.tooltipFeedback,L=r.valid,D=V(r,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return R.createElement(z,{describedby:D["aria-describedby"],feedback:C,feedbackInvalid:c,feedbackValid:m,floatingClassName:N,floatingLabel:b,id:j,invalid:l,label:o,text:v,tooltipFeedback:y,valid:L},R.createElement("textarea",P({className:H(d?"form-control-plaintext":"form-control",{"is-invalid":l,"is-valid":L},n),id:j},D,{ref:g}),a))});B.propTypes=P({className:q.string,id:q.string,plainText:q.bool},z.propTypes);B.displayName="CFormTextarea";const ae=({fileIndex:r=-1,section:g,values:a,onNewFiles:n,onPreFiels:C,type:c="images"})=>{const[m,N]=u.useState([]),[b,j]=u.useState(a),[l,o]=u.useState(Date.now()),d=(s,i)=>typeof i=="number"?i.toString().padStart(s,"0"):typeof i=="string"?i.padStart(s,"0"):"",v=s=>s.slice((s.lastIndexOf(".")-1>>>0)+2),y=(s,i)=>{let t="";return r===-1?t=`${g}-${T().format("DD-MM-YYYY hh mm ss")}-${d(2,i)}.${v(s)}`:t=`${g}-${r+1}-${T().format("DD-MM-YYYY hh mm ss")}-${d(2,i)}.${v(s)}`,t.replace(/:/g,"-")},L=s=>{var t;let i=(t=s.target)==null?void 0:t.files;S(i)},D=s=>{var t;let i=(t=s.target)==null?void 0:t.files;S(i)},S=s=>{if(b.length>0&&r!==-1){x.warning("Remove previous files before uploading new one!"),o(Date.now());return}if(s.length>1&&r!==-1){x.warning("You can upload only one file here!"),o(Date.now());return}let i=new Array;for(const t of s){let w=i.length??0,k=b.length??0;t.newName=y(t.name,m.length+w+k+1),i.push(t)}N([...m,...i]),n([...m,...i])},Y=s=>{let i=m;i.splice(s,1),o(Date.now());let t=0;for(const w of i){let k=b.length??0;w.newName=y(w.name,t+1+k),t++}N([...i]),n([...i])},$=s=>{let i=a;i.splice(s,1),r===-1?(j([...i]),C([...i])):(j([]),C([]))};u.useEffect(()=>{N([]),j([...a])},[a]),u.useEffect(()=>{},[b]);const A=(s,i=0)=>{if(s===0)return"0 Bytes";let t=1024,w=i<=0?0:i||2,k=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],I=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,I)).toFixed(w))+" "+k[I]};return e.jsx("div",{className:"flex flex-wrap",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"form-group mb-4 choose-image-wrapper text-primary-1000",children:[c==="images"&&e.jsx(p,{htmlFor:"files",className:"block text-gray-700 text-sm font-bold mb-2",children:"Images"}),c==="video"&&e.jsx(p,{htmlFor:"files",className:"block text-gray-700 text-sm font-bold mb-2",children:"Video"}),e.jsx("div",{className:"file-wrapper",children:e.jsxs("div",{className:"container",children:[e.jsx(F,{type:"file",id:"files",name:"files",multiple:!0,accept:`${c==="images"?".jpg, .jpeg, .png, .gif, .webp":".mp4, .webm"}`,onChange:D,onDrop:L,className:`block w-full text-sm text-gray-500\r
                                                            file:mr-4 file:py-2 file:px-4\r
                                                            file:rounded-full file:border-0\r
                                                            file:text-sm file:font-semibold\r
                                                            file:bg-violet-50 file:text-violet-700\r
                                                            hover:file:bg-violet-100`},l),e.jsx("span",{className:"caption  text-primary-1000",children:"Drag and drop files here"})]})})]}),e.jsxs("div",{className:"form-group",children:[c==="images"&&e.jsx("p",{className:"block text-gray-700 text-sm font-bold mb-2 text-primary-1000",children:"Images"}),c==="video"&&e.jsx("p",{className:"block text-gray-700 text-sm font-bold mb-2 text-primary-1000",children:"Video"}),e.jsx("div",{className:"files-list",children:m==null?void 0:m.map((s,i)=>e.jsxs("div",{className:"single-file flex items-center justify-between",children:[e.jsxs("div",{className:"info",children:[e.jsx("h4",{className:"name font-bold",children:s==null?void 0:s.newName}),e.jsx("p",{className:"size text-sm",children:A(s==null?void 0:s.size)})," "]}),e.jsx("button",{type:"button",className:"delete",onClick:()=>Y(i),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"18",viewBox:"0 0 14 18",children:e.jsx("path",{fill:"#000000",fillRule:"nonzero",d:"M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"})})})]},i))}),e.jsx("div",{className:"files-list",children:a==null?void 0:a.map((s,i)=>e.jsxs("div",{className:"single-file flex items-center justify-between",children:[e.jsx("div",{className:"info",children:e.jsx("a",{className:"name text-blue-600 hover:text-blue-800 visited:text-purple-600",href:s,target:"_blank",rel:"noopener noreferrer",children:s})}),s&&e.jsx("button",{type:"button",className:"delete",onClick:()=>$(i),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"18",viewBox:"0 0 14 18",children:e.jsx("path",{fill:"#000000",fillRule:"nonzero",d:"M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"})})})]},i))})]})]})})})},fe=()=>{const{id:r}=U(),g=W(),[a,n]=u.useState({_id:"",name:"",description:"",shortDescription:"",category:"",link:"",imgUrl:"",usecase:"",firstName:"",email:"",price:"",isEmployee:!1,registrationLink:"",newfiles:[],preFiles:[]}),[C,c]=u.useState(!1),m=async l=>{try{c(!0);const o=await O(l);o.msg==="no-request"?(x.warning("There is no information!"),c(!1)):n({...o.request,newfiles:[]})}catch(o){x.error(o.response.data)}};u.useEffect(()=>{r&&m(r)},[r]);const N=l=>{n({...a,newfiles:l})},b=l=>{n({...a,preFiles:l})},j=async l=>{var o;if(l.preventDefault(),((o=a==null?void 0:a.newfiles)==null?void 0:o.length)===0&&a.preFiles.length===0){x.warning("Please choose one image for this item!");return}try{let d;a.newfiles&&a.newfiles.length?d=G([...a.newfiles],"images"):d=new FormData,Object.keys(a).forEach(y=>{d.append(y,a[y])}),d.set("preFiles",JSON.stringify(a.preFiles)),c(!0);const v=await K(d);v.msg==="no-section"?(x.warning("There is no information!"),c(!1)):v.msg==="create"?(x.success("New information created!"),g("/tools")):v.msg==="update"&&(x.success("Information updated!"),g("/tools"))}catch(d){x.error(d)}};return e.jsx(J,{children:e.jsx(Z,{xs:12,children:e.jsxs(Q,{className:"mb-4",children:[e.jsx(_,{children:e.jsx("strong",{children:"Add New AI Tool"})}),e.jsxs(X,{children:[e.jsx("p",{className:"text-body-secondary small",children:"You can add new AI Tool manually."}),e.jsxs(ee,{onSubmit:j,children:[e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"Name",id:"name",value:a.name,required:!0,onChange:l=>{n({...a,name:l.target.value})},"aria-label":"Name","aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"name",children:"Name"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(B,{"aria-label":"Description",id:"description",value:a.description,required:!0,onChange:l=>{n({...a,description:l.target.value})},placeholder:"Description"}),e.jsx(p,{htmlFor:"description",children:"Description"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(B,{"aria-label":"Shot Description",id:"shortDescription",value:a.shortDescription,required:!0,onChange:l=>{n({...a,shortDescription:l.target.value})},placeholder:"Description"}),e.jsx(p,{htmlFor:"shortDescription",children:"Short Description"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(E,{id:"category",value:a.category,required:!0,onChange:l=>{n({...a,category:l.target.value})},"aria-label":"Default select example",children:[e.jsx("option",{children:"Select a Category"}),e.jsx("option",{value:"language",children:"Language"}),e.jsx("option",{value:"image",children:"Image Generation"}),e.jsx("option",{value:"writing",children:"Writing"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"data",children:"Data Analysis"}),e.jsx("option",{value:"productivity",children:"Productivity"}),e.jsx("option",{value:"coding",children:"Coding"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"Website Link","aria-label":"Website Link",id:"link",type:"url",value:a.link,required:!0,onChange:l=>{n({...a,link:l.target.value})},"aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"link",children:"Website Link"})]})}),e.jsx(h,{className:"mb-3",children:e.jsx(f,{children:e.jsx(ae,{id:"imgUrl",fileIndex:0,section:`request-${a.name}`,values:a.preFiles,onNewFiles:N,onPreFiels:b})})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"Usecase",id:"usecase",value:a.usecase,required:!0,onChange:l=>{n({...a,usecase:l.target.value})},"aria-label":"Usecase","aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"usecase",children:"Usecase"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"First Name",id:"firstName",value:a.firstName,required:!0,onChange:l=>{n({...a,firstName:l.target.value})},"aria-label":"First Name","aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"firstName",children:"First Name"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"Email",id:"email",type:"email",value:a.email,required:!0,onChange:l=>{n({...a,email:l.target.value})},"aria-label":"Email","aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"email",children:"Email"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsxs(E,{id:"price",value:a.price,required:!0,onChange:l=>{n({...a,price:l.target.value})},"aria-label":"Default select example",children:[e.jsx("option",{children:"Select Price"}),e.jsx("option",{value:"Free",children:"Free"}),e.jsx("option",{value:"Freemium",children:"Freemium"}),e.jsx("option",{value:"Paid",children:"Paid"})]}),e.jsx(p,{htmlFor:"price",children:"Price"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(f,{children:[e.jsx(F,{placeholder:"Affiliate Registration Link",id:"registrationLink",type:"url",value:a.registrationLink,required:!0,onChange:l=>{n({...a,registrationLink:l.target.value})},"aria-label":"Affiliate Registration Link","aria-describedby":"basic-addon1"}),e.jsx(p,{htmlFor:"registrationLink",children:"Affiliate Registration Link"})]})}),e.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[e.jsx(M,{color:"primary",type:"submit",style:{fontWeight:"bold",borderRadius:"5px"},children:r?"Update":"Add"}),e.jsx(M,{color:"secondary",className:"me-2 mx-2",style:{fontWeight:"bold",borderRadius:"5px"},onClick:()=>{g("/tools")},children:"Cancel"})]})]})]})]})})})};export{fe as default};
