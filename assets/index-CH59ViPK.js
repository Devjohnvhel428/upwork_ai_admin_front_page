import{r as d,k as L,j as e,B as r}from"./index-2v5gBANY.js";import{a as i,c as P}from"./index.esm-CnizH7s5.js";import{C as _,F as w,f as B,a as I}from"./index-a0eG0DEz.js";import{b as S,s as H,d as M}from"./data.service-BqQOEssq.js";import{C as U,a as O}from"./CRow-JfjSCBNI.js";import{C as $,a as z}from"./CCardBody-BhEJsPBb.js";import{C as W}from"./CCardHeader-DmkJaXZM.js";import{C as G}from"./CFormInput-CxEkhNie.js";import{C as J,a as K,b as N,c as l,d as Q,e as n}from"./CTable-BWgRCp4g.js";import{c as V}from"./cib-react-Djjz4A1D.js";import{C as X}from"./DefaultLayout-VQGmLnr1.js";import{C as Y}from"./CFormSelect-D5T0m0-m.js";import"./auth.service-DqzwgvJB.js";const me=()=>{const[v,k]=d.useState([]),[Z,c]=d.useState(!1),[p,T]=d.useState(""),[x,g]=d.useState(1),[m,D]=d.useState(10),R=async s=>{let t=new Array;s.forEach(a=>{let o={_id:a._id,name:a.name,description:a.description,shortDescription:a.shortDescription,category:a.category,link:a.link,imgUrl:a.imgUrl,usecase:a.usecase,firstName:a.firstName,email:a.email,price:a.price,registrationLink:a.registrationLink,allowed:a.allowed,isEmployee:a.isEmployee,created:a.created};t.push(o)}),k(t)},u=async()=>{c(!0);try{const s=await S();s.msg==="no-section"?(r.warning("There is no information!"),c(!1)):(await R(s.requests),c(!1))}catch(s){r.error(s)}};d.useEffect(()=>{u()},[]);const y=L(),A=s=>{y(s)},C=async(s,t)=>{try{let a=new FormData;Object.keys(s).forEach(f=>{a.append(f,s[f])}),a.set("allowed",t),c(!0);const o=await H(a);o.msg==="no-section"?(r.warning("There is no information!"),c(!1)):o.msg==="create"?(r.success("New Request was created!"),u()):o.msg==="update"&&(r.success("The Request information was updated!"),u())}catch(a){r.error(a.response.data)}},F=async s=>{try{c(!0);let t=new FormData;t.append("_id",s);const a=await M(t);a.msg==="no-section"?(r.warning("There is no information!"),c(!1)):a.msg==="delete"&&(r.success("Request was deleted successfully!"),u())}catch(t){r.error(t.response.data)}},b=v.filter(s=>{const t=s.name.toLowerCase(),a=s.link.toLowerCase(),o=s.category.toLowerCase(),f=s.email.toLowerCase(),q=s.price.toLowerCase(),h=p.toLowerCase();return t.includes(h)||a.includes(h)||o.includes(h)||f.includes(h)||q.includes(h)}),j=Math.ceil(b.length/m),E=b.slice((x-1)*m,x*m);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"AI Tools"}),e.jsx(U,{children:e.jsx(O,{xs:!0,children:e.jsxs($,{className:"mb-4",children:[e.jsx(W,{children:e.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[e.jsx(G,{type:"text",placeholder:"Filter by All",value:p,onChange:s=>T(s.target.value),className:"form-control",style:{width:"10rem",left:"0"}}),e.jsx(i,{color:"success",className:"text-light",onClick:()=>{A("/tool_form")},children:"Add New AI Tool"})]})}),e.jsx(z,{children:e.jsxs(J,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(K,{className:"text-nowrap",children:e.jsxs(N,{children:[e.jsx(l,{className:"bg-body-tertiary text-center",children:e.jsx(P,{icon:V})}),e.jsx(l,{className:"bg-body-tertiary",children:"Name"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Category"}),e.jsx(l,{className:"bg-body-tertiary",children:"Website"}),e.jsx(l,{className:"bg-body-tertiary",children:"Email"}),e.jsx(l,{className:"bg-body-tertiary",children:"Price"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Allow/Deny"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Edit"}),e.jsx(l,{className:"bg-body-tertiary text-center",children:"Delete"})]})}),e.jsx(Q,{children:E.map((s,t)=>e.jsxs(N,{"v-for":"item in tableItems",children:[e.jsx(n,{className:"text-center",children:e.jsx(X,{size:"md",src:s.imgUrl})}),e.jsx(n,{children:e.jsx("div",{children:s.name})}),e.jsx(n,{className:"text-center",children:e.jsx("div",{children:s.category})}),e.jsx(n,{children:e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("div",{className:"fw-semibold",children:e.jsx("a",{className:"text-info form-link",target:"_blank",href:s.link,children:s.link})})})}),e.jsx(n,{children:e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("div",{className:"fw-semibold",children:e.jsx("a",{className:"text-success form-link",target:"_blank",href:`mailTo:${s.email}`,children:s.email})})})}),e.jsx(n,{children:e.jsx("div",{className:"text-danger",children:s.price})}),e.jsx(n,{className:"text-center",children:s.allowed?e.jsx(i,{color:"dark",className:"text-light",shape:"rounded-pill",onClick:()=>{C(s,!1)},children:"Deny"}):e.jsx(i,{color:"success",className:"text-light",shape:"rounded-pill",onClick:()=>{C(s,!0)},children:"Allow"})}),e.jsx(n,{className:"text-center",children:e.jsx(i,{color:"primary",className:"text-light",shape:"rounded-pill",onClick:()=>{y(`/tool_form/${s._id}`)},children:"Edit"})}),e.jsx(n,{className:"text-center",children:e.jsx(i,{color:"danger",className:"text-light",shape:"rounded-pill",onClick:()=>{F(s._id)},children:"Delete"})})]},t))})]})}),e.jsx(_,{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsxs(Y,{value:m,onChange:s=>D(Number(s.target.value)),className:"form-select position-absolute mx-1",style:{width:"5rem",left:"0"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]}),e.jsx(i,{onClick:()=>g(s=>Math.max(s-1,1)),disabled:x===1,className:"btn btn-secondary mx-2",children:e.jsx(w,{icon:B})}),e.jsxs("span",{children:["Page ",x," of ",j]}),e.jsx(i,{onClick:()=>g(s=>Math.min(s+1,j)),disabled:x===j,className:"btn btn-secondary mx-2",children:e.jsx(w,{icon:I})})]})})]})})})]})};export{me as default};
